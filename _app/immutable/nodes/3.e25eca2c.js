import{_ as re}from"../chunks/preload-helper.41c905a7.js";import{S as Le,i as Se,s as Ae,k as N,q as J,a as W,l as O,m as C,r as Z,h,c as B,n as p,b as w,G as V,u as pe,H as Q,I as K,o as Be,R as x,L as qe,M as X,T as Kt,N as we,j as qt,U as zt,e as G,J as Oe,V as Re,W as ze,w as Te,K as je,g as q,v as ae,d as j,f as fe,y as ke,z as Ie,A as ye,B as Ee,X as Pe,Y as De,Z as Ue,_ as Qt,O as $t,p as xt}from"../chunks/index.7c5e5199.js";import{u as de,b as Ye,e as ge,p as ue,t as el,h as tl,l as ll,a as Je,i as et,c as sl}from"../chunks/setup.93a8bff0.js";import{w as be,e as Ft}from"../chunks/singletons.9bda445e.js";import{p as il}from"../chunks/stores.354a1da8.js";const nl=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Lipp_cultural_collection_on_fashion_en.md":()=>re(()=>import("../chunks/01_Lipp_cultural_collection_on_fashion_en.6a262103.js"),["../chunks/01_Lipp_cultural_collection_on_fashion_en.6a262103.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/01_Lipp_cultural_collections_on_fashion_de.md":()=>re(()=>import("../chunks/01_Lipp_cultural_collections_on_fashion_de.a1c79421.js"),["../chunks/01_Lipp_cultural_collections_on_fashion_de.a1c79421.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_de.md":()=>re(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_de.dc7b9591.js"),["../chunks/02_GNM_cultural_collection_on_fashion_de.dc7b9591.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_en.md":()=>re(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_en.bf461d9c.js"),["../chunks/02_GNM_cultural_collection_on_fashion_en.bf461d9c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_de.md":()=>re(()=>import("../chunks/03_Fashion_costume_terminology_de.65c202f0.js"),["../chunks/03_Fashion_costume_terminology_de.65c202f0.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_en.md":()=>re(()=>import("../chunks/03_Fashion_costume_terminology_en.2deb3000.js"),["../chunks/03_Fashion_costume_terminology_en.2deb3000.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp-GNM_Werkgruppen_de.md":()=>re(()=>import("../chunks/04_Lipp-GNM_Werkgruppen_de.62db11dc.js"),["../chunks/04_Lipp-GNM_Werkgruppen_de.62db11dc.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp_GNM_Werkgruppen_en.md":()=>re(()=>import("../chunks/04_Lipp_GNM_Werkgruppen_en.2b2f2961.js"),["../chunks/04_Lipp_GNM_Werkgruppen_en.2b2f2961.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_de.md":()=>re(()=>import("../chunks/05_family_portrait_de.be0038e8.js"),["../chunks/05_family_portrait_de.be0038e8.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_en.md":()=>re(()=>import("../chunks/05_family_portrait_en.e7c229eb.js"),["../chunks/05_family_portrait_en.e7c229eb.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_de.md":()=>re(()=>import("../chunks/06_earlymodern_images_de.2c813abe.js"),["../chunks/06_earlymodern_images_de.2c813abe.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_en.md":()=>re(()=>import("../chunks/06_earlymodern_images_en.37a06234.js"),["../chunks/06_earlymodern_images_en.37a06234.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_de.md":()=>re(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.779d98ef.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.779d98ef.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_en.md":()=>re(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_en.7402babe.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_en.7402babe.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>re(()=>import("../chunks/template.683300ea.js"),["../chunks/template.683300ea.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/test.md":()=>re(()=>import("../chunks/test.07b40b03.js"),["../chunks/test.07b40b03.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,i])=>{const n=await i(),{html:r}=n.default.render(),o=t.slice(17,-3),a=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,u=[...r.matchAll(a)].map(c=>c[2]).filter(c=>!c.startsWith("http")).map(c=>{const f=c.lastIndexOf("/");return f!==-1?c.substring(f+1):c});return{meta:n.metadata,path:o,text:r,links:u}}))},rl=async({fetch:s})=>({posts:await(await s("/api/posts")).json()}),ol=async()=>(await nl()).sort().map(l=>({slug:l.path.replaceAll("/","")})),as=Object.freeze(Object.defineProperty({__proto__:null,entries:ol,load:rl},Symbol.toStringTag,{value:"Module"})),Qe=be(""),We=be(""),Ne=be(!1),Ze=be([]),he=be([]),Fe=be([]),Ge=be(0);function tt(s){var i;let e,l=((i=s[0].meta)==null?void 0:i.description)+"",t;return{c(){e=N("div"),t=J(l),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=C(e);t=Z(r,l),r.forEach(h),this.h()},h(){p(e,"class","description svelte-rrhrf8")},m(n,r){w(n,e,r),V(e,t)},p(n,r){var o;r&1&&l!==(l=((o=n[0].meta)==null?void 0:o.description)+"")&&pe(t,l)},d(n){n&&h(e)}}}function lt(s){let e,l=s[0].meta.author+"",t;return{c(){e=N("div"),t=J(l),this.h()},l(i){e=O(i,"DIV",{class:!0});var n=C(e);t=Z(n,l),n.forEach(h),this.h()},h(){p(e,"class","author svelte-rrhrf8")},m(i,n){w(i,e,n),V(e,t)},p(i,n){n&1&&l!==(l=i[0].meta.author+"")&&pe(t,l)},d(i){i&&h(e)}}}function st(s){var n;let e,l,t=((n=new Date(s[0].meta.date))==null?void 0:n.toLocaleDateString(s[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",i;return{c(){e=N("div"),l=N("div"),i=J(t),this.h()},l(r){e=O(r,"DIV",{class:!0});var o=C(e);l=O(o,"DIV",{class:!0});var a=C(l);i=Z(a,t),a.forEach(h),o.forEach(h),this.h()},h(){p(l,"class","date svelte-rrhrf8"),p(e,"class","date svelte-rrhrf8")},m(r,o){w(r,e,o),V(e,l),V(l,i)},p(r,o){var a;o&1&&t!==(t=((a=new Date(r[0].meta.date))==null?void 0:a.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&pe(i,t)},d(r){r&&h(e)}}}function al(s){var D,y,S;let e,l,t,i,n=s[0].meta.title+"",r,o,a,u,c,f,g,d=((D=s[0].meta)==null?void 0:D.description)&&tt(s),v=((y=s[0].meta)==null?void 0:y.author)&&lt(s),b=((S=s[0].meta)==null?void 0:S.date)&&st(s);return{c(){e=N("a"),l=J("← Index"),t=W(),i=N("h1"),r=J(n),o=W(),d&&d.c(),a=W(),u=N("div"),v&&v.c(),c=W(),b&&b.c(),f=W(),g=N("div"),this.h()},l(_){e=O(_,"A",{href:!0,class:!0,rel:!0});var E=C(e);l=Z(E,"← Index"),E.forEach(h),t=B(_),i=O(_,"H1",{class:!0});var P=C(i);r=Z(P,n),P.forEach(h),o=B(_),d&&d.l(_),a=B(_),u=O(_,"DIV",{class:!0});var m=C(u);v&&v.l(m),c=B(m),b&&b.l(m),m.forEach(h),f=B(_),g=O(_,"DIV",{class:!0});var k=C(g);k.forEach(h),this.h()},h(){p(e,"href",Ft+"/"),p(e,"class","index svelte-rrhrf8"),p(e,"rel","noopener noreferrer"),p(i,"class","svelte-rrhrf8"),p(u,"class","metadata svelte-rrhrf8"),p(g,"class","markdown svelte-rrhrf8")},m(_,E){w(_,e,E),V(e,l),w(_,t,E),w(_,i,E),V(i,r),w(_,o,E),d&&d.m(_,E),w(_,a,E),w(_,u,E),v&&v.m(u,null),V(u,c),b&&b.m(u,null),w(_,f,E),w(_,g,E),g.innerHTML=s[1]},p(_,[E]){var P,m,k;E&1&&n!==(n=_[0].meta.title+"")&&pe(r,n),(P=_[0].meta)!=null&&P.description?d?d.p(_,E):(d=tt(_),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null),(m=_[0].meta)!=null&&m.author?v?v.p(_,E):(v=lt(_),v.c(),v.m(u,c)):v&&(v.d(1),v=null),(k=_[0].meta)!=null&&k.date?b?b.p(_,E):(b=st(_),b.c(),b.m(u,null)):b&&(b.d(1),b=null)},i:Q,o:Q,d(_){_&&h(e),_&&h(t),_&&h(i),_&&h(o),d&&d.d(_),_&&h(a),_&&h(u),v&&v.d(),b&&b.d(),_&&h(f),_&&h(g)}}}const fl=/\[\^([^\]]+)\]/g;let ul=100;function cl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),s.currentTarget.classList.add("hover")}function dl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),s.currentTarget.classList.remove("hover")}function _l(s,e,l){const t=l-e;return(s-e)/t*100}function ml(s,e,l){const t=l-e;return e+t*s/100}function hl(s,e,l){let t,i;K(s,Ne,_=>l(8,t=_)),K(s,Qe,_=>l(9,i=_));let{data:n}=e,{items:r}=e,{scrollTopVal:o}=e,a=n.text,u=1;const f=a.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(_,E,P)=>{if(E.startsWith("http")&!E.startsWith(de))return`<a class="external" target="_blank" href="${E}" title="${P}">${P}</a>`;{let m=decodeURIComponent(E);return`<a class="node-highlite" unique-id="${m}" id="${decodeURIComponent(E)}"
				data-id="${decodeURIComponent(E)}" title="${P}">${P}
				<span class="symbol node" unique-id="${m}" data-id="item_${decodeURIComponent(E)}"
				data-class="${r.filter(k=>k.label==P).map(k=>{var A,F;return(F=(A=k.data)==null?void 0:A["@type"])==null?void 0:F[1]})}">
					</span></a>`}}).replace(fl,(_,E)=>{const P=u++;return`<sup id="fn-${P}"><a href="#fnref-${P}">${P}</a></sup><span id="fn-${P}-content">${E}</span>`}),g=Array.from({length:u-1},(_,E)=>{var k;const P=E+1,m=(k=f.match(new RegExp(`<span id="fn-${P}-content">([^<]+)</span>`)))==null?void 0:k[1];return`<li id="fnref-${P}"> ${m}</li>`}).join(""),d=`${f}
	<ol class="biblio">${g}</ol>`;let v;Be(async()=>{l(4,v=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),D(v),v.forEach(_=>{_.addEventListener("mouseenter",cl),_.addEventListener("mouseleave",dl),_.addEventListener("click",b)})});function b(_){v.forEach(m=>{const k=m.getAttribute("data-id"),A=document.querySelector(`.node[data-id="${k}"]`);A&&A.classList.remove("clicked"),m.classList.remove("clicked")});const E=_.currentTarget.getAttribute("data-id"),P=document.querySelector(`.node[data-id="${E}"]`);P&&P.classList.toggle("clicked"),_.currentTarget.classList.toggle("clicked"),x(Qe,i=E,i)}function D(_){let E=null;l(4,v=Array.from(_).map(P=>{let m=P.offsetTop;return E!==null&&m<=E?P.adjustedOffsetTop=E+ul:P.adjustedOffsetTop=m,E=P.adjustedOffsetTop,P}))}let y=0;function S(_,E){var P,m,k,A,F,U;if(!t){let H=(P=_==null?void 0:_[y])==null?void 0:P.adjustedOffsetTop,T=(m=_==null?void 0:_[y+1])==null?void 0:m.adjustedOffsetTop,Y=(k=_==null?void 0:_[y])==null?void 0:k.getAttribute("data-id"),oe=(A=_==null?void 0:_[y+1])==null?void 0:A.getAttribute("data-id"),M=(F=document.querySelector(`.node[data-id="${Y}"]`))==null?void 0:F.offsetTop,ie=(U=document.querySelector(`.node[data-id="${oe}"]`))==null?void 0:U.offsetTop,le=_l(E,H,T),ee=ml(le,M,ie);E>T&&y++,E<H&&y!=0&&y--;const R=document.querySelector(".links:first-of-type");H&&T&&R&&le&&ee&&(R==null||R.scrollTo({top:ee}))}}return s.$$set=_=>{"data"in _&&l(0,n=_.data),"items"in _&&l(2,r=_.items),"scrollTopVal"in _&&l(3,o=_.scrollTopVal)},s.$$.update=()=>{s.$$.dirty&24&&S(v,o)},[n,d,r,o,v]}class pl extends Le{constructor(e){super(),Se(this,e,hl,al,Ae,{data:0,items:2,scrollTopVal:3})}}const Xe=be([]);function gl(s){if(!s||!ge)return s;try{const e=new URL(s),l=new URL(ge),t=e.pathname.indexOf("/api");if(t===-1)return s;const i=e.pathname.slice(t+4),n=l.pathname.replace(/\/$/,"");return l.origin+n+i+(e.search||"")+(e.hash||"")}catch{return s}}function Gt(s){if(!s||typeof s!="object")return s;for(const e in s)if(e==="@id"&&typeof s[e]=="string"){const l=s[e];let t=l.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");t=gl(t),l!==t&&(s[e]=t)}else typeof s[e]=="object"&&Gt(s[e]);return s}async function bl(){try{const s=Ye.includes("http")?Ye:`${Ft}/${Ye}`;console.log(`Fetching URL: ${s}`);const e=await fetch(s);if(!e.ok)throw new Error(`Failed to load db: ${e.statusText} (Status: ${e.status})`);const l=e.headers.get("content-type");if(!l||!l.includes("application/json"))throw new Error("Response is not valid JSON");const i=(await e.json()).map(n=>Gt(n));Xe.set(i),console.log("Database loaded and all @id fields normalized.")}catch(s){console.error("Error loading db.json:",s)}}var vl=0;function kl(){return++vl}var $e=Function("return this")();typeof $e.__nextId!="function"&&($e.__nextId=kl);function Rt(){return"uid-"+$e.__nextId()}async function Il(s,e){const l=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,t=[];let i;for(;i=l.exec(s);)if(!(i[2].includes("http")&&!i[2].includes(de))){const o=i[3],a=decodeURIComponent(i[2]);t.push({label:o,id:a,url:a,data:[]})}const n=t.filter(o=>o.url).map(o=>o.id);let r=[...yl(n,e)];for(let o=0;o<t.length;o++){const a=t.find(c=>{var f;return(f=r[o])==null?void 0:f["@id"].includes(c.id)}),u=r[o];a&&(a.uniqueId=Rt(),a.data=u)}return t}function yl(s,e,l){return e.filter(t=>{var r,o;const i=t["@id"];if(s.includes(i))return!0;const n=(o=(r=i==null?void 0:i.replace(/\/items\//,"/resources/"))==null?void 0:r.replace(/\/media\//,"/resources/"))==null?void 0:o.replace(/\/item_sets\//,"/resources/");return s.includes(n)?!0:s.some(a=>a===i||a===n||i.endsWith("/"+a))})}async function jt(s){let e=[];for(let t=0;t<s.length;t++)if(s[t].data){let i=s[t].data,n=s[t].set||null,r=El(i,n);e=[...e,...r]}return{...{nodes:e.reduce((t,i)=>(t.find(n=>n.id===i.source)||t.push({id:i.source,title:i.title}),t.find(n=>n.id===i.target)||t.push({id:i.target,title:i.title}),t),[]),links:e}}}function El(s,e){var a;let l=[],t=s["@id"];e&&l.push({source:e["@id"],target:t,img:((a=s[ue.img[0]])==null?void 0:a[0]["@id"])||xe(s,ue.img.join(".")),title:s[el]});let i,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/,o=function(u){var c,f,g,d,v,b,D;for(let y in u)if(y==="@id"||y==="@value"&&(u[ue.title]||u.display_title||u["@id"]||n)){let S=u["@id"];S=S==null?void 0:S.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");const _=u[ue.title]||u.display_title||u["@id"],E=(u==null?void 0:u.thumbnail_url)||((g=(f=u==null?void 0:u[(c=ue.img)==null?void 0:c[0]])==null?void 0:f[0])==null?void 0:g["@id"])||xe(u,ue.img.join("."));let P=((v=(d=u[void 0])==null?void 0:d.replace("_"," "))==null?void 0:v.replace(r,""))||(i==null?void 0:i.replace(r,""));!l.some(k=>k.source===t&&k.target===S)&&!tl.includes(P)&&l.push({source:t,target:S,title:_,img:E,property:P,reverse:n,external:!S.includes(de)})}else typeof u[y]=="object"&&(isNaN(y)&&(i=(D=(b=(y==null?void 0:y.split(":"))[1])==null?void 0:b.split("_"))==null?void 0:D.join(" "),y==="@reverse"&&(n=!0)),o(u[y]))};return o(s),l}function xe(s,e){return e.split(".").reduce((l,t)=>(l||{})[t],s)}function it(s,e,l){const t=s.slice();return t[27]=e[l],t}function wl(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(ge,""))||"")+"",t;return{c(){e=N("div"),t=J(l),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=C(e);t=Z(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),V(e,t)},p(n,r){var o;r&1&&l!==(l=(((o=n[0].title)==null?void 0:o.replace(ge,""))||"")+"")&&pe(t,l)},d(n){n&&h(e)}}}function Pl(s){let e,l,t,i,n=s[0].title&&!s[0].title.startsWith(ge),r,o,a,u=n&&nt(s);return{c(){e=N("img"),i=W(),u&&u.c(),r=G(),this.h()},l(c){e=O(c,"IMG",{src:!0,alt:!0,class:!0}),i=B(c),u&&u.l(c),r=G(),this.h()},h(){je(e.src,l=s[5])||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(c,f){w(c,e,f),w(c,i,f),u&&u.m(c,f),w(c,r,f),o||(a=[X(e,"load",s[11]),X(e,"error",Ut)],o=!0)},p(c,f){f&32&&!je(e.src,l=c[5])&&p(e,"src",l),f&1&&t!==(t=c[0].title)&&p(e,"alt",t),f&1&&(n=c[0].title&&!c[0].title.startsWith(ge)),n?u?u.p(c,f):(u=nt(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(c){c&&h(e),c&&h(i),u&&u.d(c),c&&h(r),o=!1,we(a)}}}function Dl(s){let e,l,t,i,n,r,o,a=s[0].title&&rt(s);return{c(){e=N("img"),i=W(),a&&a.c(),n=G(),this.h()},l(u){e=O(u,"IMG",{src:!0,alt:!0,class:!0}),i=B(u),a&&a.l(u),n=G(),this.h()},h(){je(e.src,l=s[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){w(u,e,c),w(u,i,c),a&&a.m(u,c),w(u,n,c),r||(o=[X(e,"load",s[11]),X(e,"error",Ut)],r=!0)},p(u,c){c&1&&!je(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?a?a.p(u,c):(a=rt(u),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(u){u&&h(e),u&&h(i),a&&a.d(u),u&&h(n),r=!1,we(o)}}}function nt(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(ge,""))||"")+"",t;return{c(){e=N("div"),t=J(l),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=C(e);t=Z(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),V(e,t)},p(n,r){var o;r&1&&l!==(l=(((o=n[0].title)==null?void 0:o.replace(ge,""))||"")+"")&&pe(t,l)},d(n){n&&h(e)}}}function rt(s){var i;let e,l=((i=s[0].title)==null?void 0:i.replace(ge,""))+"",t;return{c(){e=N("div"),t=J(l),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=C(e);t=Z(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),V(e,t)},p(n,r){var o;r&1&&l!==(l=((o=n[0].title)==null?void 0:o.replace(ge,""))+"")&&pe(t,l)},d(n){n&&h(e)}}}function ot(s){let e,l=s[8].essays,t=[];for(let i=0;i<l.length;i+=1)t[i]=at(it(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=G()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=G()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&256){l=i[8].essays;let r;for(r=0;r<l.length;r+=1){const o=it(i,l,r);t[r]?t[r].p(o,n):(t[r]=at(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Oe(t,i),i&&h(e)}}}function at(s){let e,l,t,i=s[27].title+"",n,r;return{c(){e=N("a"),l=J("→"),t=N("em"),n=J(i),this.h()},l(o){e=O(o,"A",{class:!0,href:!0,target:!0,rel:!0});var a=C(e);l=Z(a,"→"),t=O(a,"EM",{});var u=C(t);n=Z(u,i),u.forEach(h),a.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",r=s[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(o,a){w(o,e,a),V(e,l),V(e,t),V(t,n)},p(o,a){a&256&&i!==(i=o[27].title+"")&&pe(n,i),a&256&&r!==(r=o[27].url)&&p(e,"href",r)},d(o){o&&h(e)}}}function ft(s){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?Ll:Tl}let t=l(s),i=t(s);return{c(){i.c(),e=G()},l(n){i.l(n),e=G()},m(n,r){i.m(n,r),w(n,e,r)},p(n,r){t===(t=l(n))&&i?i.p(n,r):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){i.d(n),n&&h(e)}}}function Tl(s){let e,l,t;return{c(){e=N("a"),l=J("→ Metadata"),this.h()},l(i){e=O(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/item/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),V(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/item/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function Ll(s){let e,l,t;return{c(){e=N("a"),l=J("→ Metadata"),this.h()},l(i){e=O(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=C(e);l=Z(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/media/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),V(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/media/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function Sl(s){let e,l,t,i,n,r;function o(g,d){return g[0].img?Dl:g[5]?Pl:wl}let a=o(s),u=a(s),c=s[8]!=null&&ot(s),f=s[3]&&ft(s);return{c(){e=N("div"),u.c(),l=W(),c&&c.c(),t=W(),f&&f.c(),this.h()},l(g){e=O(g,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=C(e);u.l(d),l=B(d),c&&c.l(d),t=B(d),f&&f.l(d),d.forEach(h),this.h()},h(){p(e,"class","node svelte-189mvtg"),p(e,"title",i=s[0].title),p(e,"source",s[9]),p(e,"target",s[4]),p(e,"data-id",s[4]),qe(e,"selected",s[7]),qe(e,"linkToEssay",s[8]!=null)},m(g,d){w(g,e,d),u.m(e,null),V(e,l),c&&c.m(e,null),V(e,t),f&&f.m(e,null),s[20](e),n||(r=[X(e,"mouseover",s[21]),X(e,"mouseleave",function(){Kt(s[13](s[4]))&&s[13](s[4]).apply(this,arguments)}),X(e,"click",s[17]),X(e,"keydown",s[18]),X(e,"focus",s[19])],n=!0)},p(g,[d]){s=g,a===(a=o(s))&&u?u.p(s,d):(u.d(1),u=a(s),u&&(u.c(),u.m(e,l))),s[8]!=null?c?c.p(s,d):(c=ot(s),c.c(),c.m(e,t)):c&&(c.d(1),c=null),s[3]?f?f.p(s,d):(f=ft(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&1&&i!==(i=s[0].title)&&p(e,"title",i),d&512&&p(e,"source",s[9]),d&16&&p(e,"target",s[4]),d&16&&p(e,"data-id",s[4]),d&128&&qe(e,"selected",s[7]),d&256&&qe(e,"linkToEssay",s[8]!=null)},i:Q,o:Q,d(g){g&&h(e),u.d(),c&&c.d(),f&&f.d(),s[20](null),n=!1,we(r)}}}function Ut(s){s.target.style.display="none"}function Al(s,e,l){var ee,R,ne;let t,i,n,r,o,a,u=Q,c=()=>(u(),u=Re(y,L=>l(23,a=L)),y),f,g=Q,d=()=>(g(),g=Re(S,L=>l(24,f=L)),S),v,b;K(s,he,L=>l(16,o=L)),K(s,Qe,L=>l(25,v=L)),K(s,We,L=>l(10,b=L)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>g());let{datum:D}=e,{entities:y}=e;c();let{updatePosition:S}=e;d();let{essaysItems:_}=e,{site:E}=e,{openNode:P}=e,m,k=null;qt(()=>{const L=D.source;L==`item_${v}`&&L!=k&&P(D,1),k=`item_${v}`}),zt(()=>{x(S,f=!0,f)});function A(){x(S,f=!0,f)}const F=a.find(L=>L["@id"]===D.target);if((ee=F==null?void 0:F.thumbnail_display_urls)!=null&&ee.large)m=F.thumbnail_display_urls.large;else if((R=F==null?void 0:F["o:media"])!=null&&R.length)for(const L of F["o:media"]){const I=a.find(z=>z["@id"]===L["@id"]);if((ne=I==null?void 0:I.thumbnail_display_urls)!=null&&ne.large){m=I.thumbnail_display_urls.large;break}}m||(m="");let U;function H(L){const I=L,z=document.querySelector(`.node-highlite[data-id="${I}"]`);z&&z.classList.add("hover"),U.classList.add("hover")}function T(L){const I=L,z=document.querySelector(`.node-highlite[data-id="${I}"]`);z&&z.classList.remove("hover"),U.classList.remove("hover")}function Y(L){ze.call(this,s,L)}function oe(L){ze.call(this,s,L)}function M(L){ze.call(this,s,L)}function ie(L){Te[L?"unshift":"push"](()=>{U=L,l(6,U)})}const le=()=>{x(We,b=i,b),H(i)};return s.$$set=L=>{"datum"in L&&l(0,D=L.datum),"entities"in L&&c(l(1,y=L.entities)),"updatePosition"in L&&d(l(2,S=L.updatePosition)),"essaysItems"in L&&l(14,_=L.essaysItems),"site"in L&&l(3,E=L.site),"openNode"in L&&l(15,P=L.openNode)},s.$$.update=()=>{s.$$.dirty&1&&l(9,t=D==null?void 0:D.source),s.$$.dirty&1&&l(4,i=D==null?void 0:D.target),s.$$.dirty&16400&&l(8,n=_.find(L=>L.id==i)),s.$$.dirty&65537&&l(7,r=o.some(L=>(L==null?void 0:L.id)==D.target))},[D,y,S,E,i,m,U,r,n,t,b,A,H,T,_,P,o,Y,oe,M,ie,le]}class Wt extends Le{constructor(e){super(),Se(this,e,Al,Sl,Ae,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}function Nl(s){let e,l,t;return{c(){e=N("div"),this.h()},l(i){e=O(i,"DIV",{source:!0,target:!0}),C(e).forEach(h),this.h()},h(){p(e,"source",l=s[0].source),p(e,"target",t=s[0].target)},m(i,n){w(i,e,n),s[8](e)},p(i,[n]){n&1&&l!==(l=i[0].source)&&p(e,"source",l),n&1&&t!==(t=i[0].target)&&p(e,"target",t)},i:Q,o:Q,d(i){i&&h(e),s[8](null)}}}let ut=0;function Ol(s,e,l){let t,i,n,r,o=Q,a=()=>(o(),o=Re(d,_=>l(5,r=_)),d),u,c;K(s,Fe,_=>l(12,n=_)),K(s,Ge,_=>l(6,u=_)),K(s,he,_=>l(7,c=_)),s.$$.on_destroy.push(()=>o());let{datum:f}=e,{label:g}=e,{updatePosition:d}=e;a();let v,b=Rt();Be(()=>{y()});function D(_,E=0,P){const m=_,k=[...document.querySelectorAll(`.node[data-id="${m}"]`)],A=[];return k.forEach(F=>{const U=F.getBoundingClientRect(),H={x:U.x+u,y:U.y+E,width:U.width-E/2,height:U.height,selected:"selected"};A.push(H)}),A}function y(){delete n[b],x(d,r=!1,r);const _=D(f.source,ut),E=D(f.target,ut);v&&(v.getBoundingClientRect().x,v.getBoundingClientRect().y),_.forEach(P=>{E.forEach(m=>{let k=100;const A=P==null?void 0:P.selected;let F,U,H,T,Y;F=P.x+P.width,U=P.y,H=m.x,T=m.y,m.x<P.x||m.x==P.x?Y=m.x-k*5:m.x==P.x?Y=m.x-k*3:Y=m.x-k,f.source.includes("item_")&&(Y=m.x-k);const oe=F+k,M=U,ie=m.y,le=`M${F},${U}C${oe},${M} ${Y},${ie} ${H},${T}`;x(Fe,n[b]=n[b]||[],n),n[b].push({class:i,d:le,label:g,selected:A,datum:{source:f.source,target:f.target},reverse:f==null?void 0:f.reverse})})})}zt(()=>{delete n[b],x(Fe,n=[],n)});function S(_){Te[_?"unshift":"push"](()=>{v=_,l(2,v)})}return s.$$set=_=>{"datum"in _&&l(0,f=_.datum),"label"in _&&l(3,g=_.label),"updatePosition"in _&&a(l(1,d=_.updatePosition))},s.$$.update=()=>{s.$$.dirty&96&&y(),s.$$.dirty&128&&l(4,t=c.slice(-1)[0].id),s.$$.dirty&17&&(i=f.target==t||f.source==t?"highlite":"")},[f,d,v,g,t,r,u,c,S]}class Bt extends Le{constructor(e){super(),Se(this,e,Ol,Nl,Ae,{datum:0,label:3,updatePosition:1})}}new TextEncoder;function ct(s,e,l){const t=s.slice();return t[23]=e[l],t}function dt(s){let e,l;return{c(){e=N("div"),l=J("Loading..."),this.h()},l(t){e=O(t,"DIV",{class:!0});var i=C(e);l=Z(i,"Loading..."),i.forEach(h),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,i){w(t,e,i),V(e,l)},d(t){t&&h(e)}}}function _t(s){let e,l,t=s[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=ht(ct(s,t,r));const n=r=>j(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=G()},l(r){for(let o=0;o<i.length;o+=1)i[o].l(r);e=G()},m(r,o){for(let a=0;a<i.length;a+=1)i[a].m(r,o);w(r,e,o),l=!0},p(r,o){if(o&639){t=r[0];let a;for(a=0;a<t.length;a+=1){const u=ct(r,t,a);i[a]?(i[a].p(u,o),q(i[a],1)):(i[a]=ht(u),i[a].c(),q(i[a],1),i[a].m(e.parentNode,e))}for(ae(),a=t.length;a<i.length;a+=1)n(a);fe()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)q(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)j(i[o]);l=!1},d(r){Oe(i,r),r&&h(e)}}}function Vl(s){var t,i;let e,l;return e=new Bt({props:{datum:s[23],updatePosition:s[3],label:((i=(t=s[23])==null?void 0:t.property)==null?void 0:i.replace(de,""))||""}}),{c(){ke(e.$$.fragment)},l(n){Ie(e.$$.fragment,n)},m(n,r){ye(e,n,r),l=!0},p(n,r){var a,u;const o={};r&1&&(o.datum=n[23]),r&8&&(o.updatePosition=n[3]),r&1&&(o.label=((u=(a=n[23])==null?void 0:a.property)==null?void 0:u.replace(de,""))||""),e.$set(o)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){j(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function Cl(s){let e,l,t=s[23].target&&s[23].source!=s[23].target&&mt(s);return{c(){t&&t.c(),e=G()},l(i){t&&t.l(i),e=G()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[23].target&&i[23].source!=i[23].target?t?(t.p(i,n),n&1&&q(t,1)):(t=mt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),j(t,1,1,()=>{t=null}),fe())},i(i){l||(q(t),l=!0)},o(i){j(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function mt(s){var u,c;let e,l,t,i,n;const r=[ql,Ml],o=[];function a(f,g){var d;return(d=f[23])!=null&&d.external?1:0}return e=a(s),l=o[e]=r[e](s),i=new Bt({props:{datum:s[23],updatePosition:s[3],label:((c=(u=s[23])==null?void 0:u.property)==null?void 0:c.replace(de,""))||""}}),{c(){l.c(),t=W(),ke(i.$$.fragment)},l(f){l.l(f),t=B(f),Ie(i.$$.fragment,f)},m(f,g){o[e].m(f,g),w(f,t,g),ye(i,f,g),n=!0},p(f,g){var b,D;let d=e;e=a(f),e===d?o[e].p(f,g):(ae(),j(o[d],1,1,()=>{o[d]=null}),fe(),l=o[e],l?l.p(f,g):(l=o[e]=r[e](f),l.c()),q(l,1),l.m(t.parentNode,t));const v={};g&1&&(v.datum=f[23]),g&8&&(v.updatePosition=f[3]),g&1&&(v.label=((D=(b=f[23])==null?void 0:b.property)==null?void 0:D.replace(de,""))||""),i.$set(v)},i(f){n||(q(l),q(i.$$.fragment,f),n=!0)},o(f){j(l),j(i.$$.fragment,f),n=!1},d(f){o[e].d(f),f&&h(t),Ee(i,f)}}}function Ml(s){let e,l,t,i;return l=new Wt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),{c(){e=N("a"),ke(l.$$.fragment),this.h()},l(n){e=O(n,"A",{href:!0,target:!0,rel:!0});var r=C(e);Ie(l.$$.fragment,r),r.forEach(h),this.h()},h(){p(e,"href",t=s[23].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){w(n,e,r),ye(l,e,null),i=!0},p(n,r){const o={};r&64&&(o.site=n[6]),r&4&&(o.entities=n[2]),r&8&&(o.updatePosition=n[3]),r&1&&(o.datum=n[23]),r&32&&(o.essaysItems=n[5]),l.$set(o),(!i||r&1&&t!==(t=n[23].target))&&p(e,"href",t)},i(n){i||(q(l.$$.fragment,n),i=!0)},o(n){j(l.$$.fragment,n),i=!1},d(n){n&&h(e),Ee(l)}}}function ql(s){let e,l;function t(){return s[16](s[23])}function i(){return s[17](s[23])}return e=new Wt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),e.$on("click",t),e.$on("keydown",i),{c(){ke(e.$$.fragment)},l(n){Ie(e.$$.fragment,n)},m(n,r){ye(e,n,r),l=!0},p(n,r){s=n;const o={};r&64&&(o.site=s[6]),r&4&&(o.entities=s[2]),r&8&&(o.updatePosition=s[3]),r&1&&(o.datum=s[23]),r&32&&(o.essaysItems=s[5]),e.$set(o)},i(n){l||(q(e.$$.fragment,n),l=!0)},o(n){j(e.$$.fragment,n),l=!1},d(n){Ee(e,n)}}}function ht(s){let e,l,t,i,n;function r(...c){return s[15](s[23],...c)}const o=[Cl,Vl],a=[];function u(c,f){return f&3&&(e=null),e==null&&(e=!!c[1].some(r)),e?0:c[23].source&&c[23].target&&c[23].source!=c[23].target?1:-1}return~(l=u(s,-1))&&(t=a[l]=o[l](s)),{c(){t&&t.c(),i=G()},l(c){t&&t.l(c),i=G()},m(c,f){~l&&a[l].m(c,f),w(c,i,f),n=!0},p(c,f){s=c;let g=l;l=u(s,f),l===g?~l&&a[l].p(s,f):(t&&(ae(),j(a[g],1,1,()=>{a[g]=null}),fe()),~l?(t=a[l],t?t.p(s,f):(t=a[l]=o[l](s),t.c()),q(t,1),t.m(i.parentNode,i)):t=null)},i(c){n||(q(t),n=!0)},o(c){j(t),n=!1},d(c){~l&&a[l].d(c),c&&h(i)}}}function zl(s){let e,l,t,i=s[0]&&typeof s[0]=="object"&&Object.keys(s[0]).length>0,n,r=s[8]&&dt(),o=i&&_t(s);return{c(){e=N("section"),r&&r.c(),l=W(),t=N("div"),o&&o.c()},l(a){e=O(a,"SECTION",{});var u=C(e);r&&r.l(u),l=B(u),t=O(u,"DIV",{});var c=C(t);o&&o.l(c),c.forEach(h),u.forEach(h)},m(a,u){w(a,e,u),r&&r.m(e,null),V(e,l),V(e,t),o&&o.m(t,null),s[18](e),n=!0},p(a,[u]){a[8]?r||(r=dt(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),u&1&&(i=a[0]&&typeof a[0]=="object"&&Object.keys(a[0]).length>0),i?o?(o.p(a,u),u&1&&q(o,1)):(o=_t(a),o.c(),q(o,1),o.m(t,null)):o&&(ae(),j(o,1,1,()=>{o=null}),fe())},i(a){n||(q(o),n=!0)},o(a){j(o),n=!1},d(a){a&&h(e),r&&r.d(),o&&o.d(),s[18](null)}}}function Fl(s){let e=document.querySelector(`#col_${s}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function Gl(s,e){return e.filter(l=>!s.some(t=>t.target===l.target||t.id===l.target))}function Rl(s,e,l){let t,i=Q,n=()=>(i(),i=Re(d,T=>l(20,t=T)),d),r,o;K(s,he,T=>l(21,r=T)),K(s,Xe,T=>l(22,o=T)),s.$$.on_destroy.push(()=>i());let{category:a}=e,{data:u}=e,{newData:c}=e,{dataLen:f}=e,{entities:g}=e,{updatePosition:d}=e;n();let{index:v}=e,{loadData:b}=e,{defaultNodes:D}=e,{batchSize:y}=e,{essaysItems:S}=e,{site:_}=e,E,P,m={nodes:[],links:[]};async function k(T,Y){Fl(Y),l(8,P=!0),r.splice(Y,r.length-Y);let oe=r.map(R=>R.data).flat();const M=o.find(R=>R["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/"));if(M!=null&&M["o:items"]&&r.length==1){let R=[];M["o:items"]["@id"],o.find(I=>I["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")).forEach(I=>{R.push(I)});let L=R.map(I=>{var z,se;return{title:I[ue.title]||((z=I.data)==null?void 0:z["@id"]),"@id":I["@id"],thumbnail_display_urls:((se=I[ue.img[0]])==null?void 0:se[0]["@id"])||getNestedValue(I,ue.img.join("."))}});M.related={...L}}m=await jt([{data:M}]);let ie=m.links.filter(R=>R.source==T.target||R.target==T.target),le=Gl([...D,...oe],ie),ee=ie.slice(0,y);x(he,r[Y]={id:T.target,data:ie.sort((R,ne)=>{if(R.property)return R.property.localeCompare(ne.property)}),page:0,new:le,paginate:ee},r),l(8,P=!1),le.length>0&&b(ee,y),x(d,t=!0,t)}const A=(T,Y)=>(Y==null?void 0:Y.title)===T.title,F=T=>{k(T,v+1)},U=T=>{k(T,v+1)};function H(T){Te[T?"unshift":"push"](()=>{E=T,l(7,E)})}return s.$$set=T=>{"category"in T&&l(10,a=T.category),"data"in T&&l(0,u=T.data),"newData"in T&&l(1,c=T.newData),"dataLen"in T&&l(11,f=T.dataLen),"entities"in T&&l(2,g=T.entities),"updatePosition"in T&&n(l(3,d=T.updatePosition)),"index"in T&&l(4,v=T.index),"loadData"in T&&l(12,b=T.loadData),"defaultNodes"in T&&l(13,D=T.defaultNodes),"batchSize"in T&&l(14,y=T.batchSize),"essaysItems"in T&&l(5,S=T.essaysItems),"site"in T&&l(6,_=T.site)},[u,c,g,d,v,S,_,E,P,k,a,f,b,D,y,A,F,U,H]}class Xt extends Le{constructor(e){super(),Se(this,e,Rl,zl,Ae,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function pt(s,e,l){const t=s.slice();return t[35]=e[l],t[37]=l,t}function Ke(s){const e=s.slice(),l=e[35].paginate.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property)));e[38]=l;const t=e[35].data.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property))).length;return e[39]=t,e}function gt(s,e,l){const t=s.slice();t[40]=e[l];const i=t[35].paginate.filter(function(...o){return s[20](t[40],...o)});t[41]=i;const n=t[35].data.filter(function(...o){return s[21](t[40],...o)}).length;return t[39]=n,t}function jl(s){let e,l,t=s[5],i=[];for(let r=0;r<t.length;r+=1)i[r]=wt(pt(s,t,r));const n=r=>j(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=G()},l(r){for(let o=0;o<i.length;o+=1)i[o].l(r);e=G()},m(r,o){for(let a=0;a<i.length;a+=1)i[a].m(r,o);w(r,e,o),l=!0},p(r,o){if(o[0]&16063){t=r[5];let a;for(a=0;a<t.length;a+=1){const u=pt(r,t,a);i[a]?(i[a].p(u,o),q(i[a],1)):(i[a]=wt(u),i[a].c(),q(i[a],1),i[a].m(e.parentNode,e))}for(ae(),a=t.length;a<i.length;a+=1)n(a);fe()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)q(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)j(i[o]);l=!1},d(r){Oe(i,r),r&&h(e)}}}function Ul(s){let e,l,t;return{c(){e=N("div"),l=N("h4"),t=J("Loading Graph..."),this.h()},l(i){e=O(i,"DIV",{});var n=C(e);l=O(n,"H4",{class:!0});var r=C(l);t=Z(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){p(l,"class","loading svelte-4h2tw7")},m(i,n){w(i,e,n),V(e,l),V(l,t)},p:Q,i:Q,o:Q,d(i){i&&h(e)}}}function bt(s){let e,l,t,i=s[35].paginate.filter(s[19]).length>0,n,r,o,a,u,c=s[3].mainCategories,f=[];for(let b=0;b<c.length;b+=1)f[b]=kt(gt(s,c,b));const g=b=>j(f[b],1,1,()=>{f[b]=null});let d=i&&It(Ke(s)),v=s[35].paginate.length<s[35].new.length&&Et(s);return{c(){e=N("div"),l=N("div");for(let b=0;b<f.length;b+=1)f[b].c();t=W(),d&&d.c(),n=W(),v&&v.c(),r=W(),this.h()},l(b){e=O(b,"DIV",{class:!0,id:!0});var D=C(e);l=O(D,"DIV",{});var y=C(l);for(let S=0;S<f.length;S+=1)f[S].l(y);t=B(y),d&&d.l(y),n=B(y),v&&v.l(y),y.forEach(h),D.forEach(h),r=B(b),this.h()},h(){p(e,"class","links svelte-4h2tw7"),p(e,"id","col_"+s[37])},m(b,D){w(b,e,D),V(e,l);for(let y=0;y<f.length;y+=1)f[y].m(l,null);V(l,t),d&&d.m(l,null),V(l,n),v&&v.m(l,null),s[24](e),w(b,r,D),o=!0,a||(u=[X(e,"scroll",s[25]),X(e,"click",s[26]),X(e,"keypress",s[27])],a=!0)},p(b,D){if(D[0]&7725){c=b[3].mainCategories;let y;for(y=0;y<c.length;y+=1){const S=gt(b,c,y);f[y]?(f[y].p(S,D),q(f[y],1)):(f[y]=kt(S),f[y].c(),q(f[y],1),f[y].m(l,t))}for(ae(),y=c.length;y<f.length;y+=1)g(y);fe()}D[0]&40&&(i=b[35].paginate.filter(b[19]).length>0),i?d?(d.p(Ke(b),D),D[0]&40&&q(d,1)):(d=It(Ke(b)),d.c(),q(d,1),d.m(l,n)):d&&(ae(),j(d,1,1,()=>{d=null}),fe()),b[35].paginate.length<b[35].new.length?v?v.p(b,D):(v=Et(b),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},i(b){if(!o){for(let D=0;D<c.length;D+=1)q(f[D]);q(d),o=!0}},o(b){f=f.filter(Boolean);for(let D=0;D<f.length;D+=1)j(f[D]);j(d),o=!1},d(b){b&&h(e),Oe(f,b),d&&d.d(),v&&v.d(),s[24](null),b&&h(r),a=!1,we(u)}}}function vt(s){let e,l;return e=new Xt({props:{site:s[3].publicSite,essaysItems:s[2],category:s[40].key,data:s[41],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ke(e.$$.fragment)},l(t){Ie(e.$$.fragment,t)},m(t,i){ye(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&8&&(n.category=t[40].key),i[0]&40&&(n.data=t[41]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Ee(e,t)}}}function kt(s){let e,l,t=s[41].length>0&&vt(s);return{c(){t&&t.c(),e=G()},l(i){t&&t.l(i),e=G()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[41].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=vt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),j(t,1,1,()=>{t=null}),fe())},i(i){l||(q(t),l=!0)},o(i){j(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function It(s){let e,l,t=s[38].length>0&&yt(s);return{c(){t&&t.c(),e=G()},l(i){t&&t.l(i),e=G()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[38].length>0?t?(t.p(i,n),n[0]&40&&q(t,1)):(t=yt(i),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),j(t,1,1,()=>{t=null}),fe())},i(i){l||(q(t),l=!0)},o(i){j(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function yt(s){let e,l;return e=new Xt({props:{site:s[3].publicSite,essaysItems:s[2],category:"",data:s[38],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ke(e.$$.fragment)},l(t){Ie(e.$$.fragment,t)},m(t,i){ye(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&40&&(n.data=t[38]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Ee(e,t)}}}function Et(s){let e,l,t,i;function n(){return s[22](s[37])}function r(){return s[23](s[37])}return{c(){e=N("div"),l=J("Load more"),this.h()},l(o){e=O(o,"DIV",{class:!0});var a=C(e);l=Z(a,"Load more"),a.forEach(h),this.h()},h(){p(e,"class","more svelte-4h2tw7")},m(o,a){w(o,e,a),V(e,l),t||(i=[X(e,"click",n),X(e,"keydown",r)],t=!0)},p(o,a){s=o},d(o){o&&h(e),t=!1,we(i)}}}function wt(s){var i,n;let e,l,t=((i=s[35])==null?void 0:i.new)&&((n=s[35])==null?void 0:n.new.length)>0&&bt(s);return{c(){t&&t.c(),e=G()},l(r){t&&t.l(r),e=G()},m(r,o){t&&t.m(r,o),w(r,e,o),l=!0},p(r,o){var a,u;(a=r[35])!=null&&a.new&&((u=r[35])==null?void 0:u.new.length)>0?t?(t.p(r,o),o[0]&32&&q(t,1)):(t=bt(r),t.c(),q(t,1),t.m(e.parentNode,e)):t&&(ae(),j(t,1,1,()=>{t=null}),fe())},i(r){l||(q(t),l=!0)},o(r){j(t),l=!1},d(r){t&&t.d(r),r&&h(e)}}}function Pt(s){let e,l,t,i;return{c(){e=N("div"),l=J("✕"),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=C(e);l=Z(r,"✕"),r.forEach(h),this.h()},h(){p(e,"class","close svelte-4h2tw7")},m(n,r){w(n,e,r),V(e,l),t||(i=[X(e,"click",s[29]),X(e,"keypress",s[30])],t=!0)},p:Q,d(n){n&&h(e),t=!1,we(i)}}}function Wl(s){let e,l,t,i,n,r;const o=[Ul,jl],a=[];function u(f,g){return f[8].length==0?0:1}l=u(s),t=a[l]=o[l](s);let c=s[5].length>1&&Pt(s);return{c(){e=N("div"),t.c(),i=W(),c&&c.c(),n=G(),this.h()},l(f){e=O(f,"DIV",{class:!0});var g=C(e);t.l(g),g.forEach(h),i=B(f),c&&c.l(f),n=G(),this.h()},h(){p(e,"class","graph svelte-4h2tw7")},m(f,g){w(f,e,g),a[l].m(e,null),s[28](e),w(f,i,g),c&&c.m(f,g),w(f,n,g),r=!0},p(f,g){let d=l;l=u(f),l===d?a[l].p(f,g):(ae(),j(a[d],1,1,()=>{a[d]=null}),fe(),t=a[l],t?t.p(f,g):(t=a[l]=o[l](f),t.c()),q(t,1),t.m(e,null)),f[5].length>1?c?c.p(f,g):(c=Pt(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i(f){r||(q(t),r=!0)},o(f){j(t),r=!1},d(f){f&&h(e),a[l].d(),s[28](null),f&&h(i),c&&c.d(f),f&&h(n)}}}function Bl(s,e,l){const t=l-e;return(s-e)/t*100}function Xl(s,e,l){const t=l-e;return e+t*s/100}function Hl(s,e,l){let t,i,n,r,o;K(s,Ne,I=>l(32,i=I)),K(s,he,I=>l(5,n=I)),K(s,Xe,I=>l(33,r=I));let{updatePosition:a}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:g}=e,{config:d}=e,{items:v}=e,{screenSize:b}=e,D;const y=be([]);K(s,y,I=>l(8,o=I));let S=d.batch,_,E=c.nodes.filter(I=>f.includes(I.id));Be(async()=>{P(c.nodes,S)}),qt(()=>{_.lastElementChild&&b>600&&_.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function P(I,z){const se=I.map($=>$.id||$.target);c.links&&c.links.forEach($=>{se.includes($.target)||se.push($.target),se.includes($.source)||se.push($.source)});const ce=Array.from(new Set(se)),_e=Math.ceil(ce.length/z);for(let $=0;$<_e;$++){const me=ce.slice($*z,($+1)*z);let te=r.filter(ve=>me.includes(ve["@id"]));y.update(ve=>{for(const Ce of te)ve.some(Ve=>Ve["@id"]===Ce["@id"])||ve.push(Ce);return ve})}}let m;const k=(I,z)=>{var se,ce,_e,$,me;if(z!=null){const te=((se=n[I])==null?void 0:se.page)+1||0;x(he,n[I]={...n[I],page:te,paginate:(ce=n[I])==null?void 0:ce.data.slice(0,te*S)},n),(_e=n[I])!=null&&_e.data&&(($=n[I])==null?void 0:$.paginate.length)!=((me=n[I])==null?void 0:me.data.length)&&P(n[I].paginate.slice(-S),S)}};let A=0;function F(I){var z,se,ce,_e,$,me;if(i){const te=document.querySelectorAll(".links:first-of-type .node");let ve=(z=te==null?void 0:te[A])==null?void 0:z.offsetTop,Ce=(se=te==null?void 0:te[A])==null?void 0:se.getAttribute("data-id"),Ve=(ce=te==null?void 0:te[A+1])==null?void 0:ce.offsetTop,Ht=(_e=te==null?void 0:te[A+1])==null?void 0:_e.getAttribute("data-id"),Yt=($=document.querySelector(`.node-highlite[data-id="${Ce}"]`))==null?void 0:$.offsetTop,Jt=(me=document.querySelector(`.node-highlite[data-id="${Ht}"]`))==null?void 0:me.offsetTop,Zt=Bl(I,ve,Ve),He=Xl(Zt,Yt,Jt);const Me=document.querySelector(".markdown__container");I>Ve&&A++,I<ve&&A!=0&&A--,Me&&He&&ve!==Ve&&He>0&&(Me==null||Me.scrollTo({top:He}))}}const U=I=>!d.mainCategories.some(z=>z.props.includes(I.property)),H=(I,z)=>I.props.includes(z.property),T=(I,z)=>I.props.includes(z.property),Y=I=>k(I,m),oe=I=>k(I,m);function M(I){Te[I?"unshift":"push"](()=>{m=I,l(7,m)})}const ie=()=>{let I=document.querySelector("#col_0");I.addEventListener("scroll",z=>{l(4,D=I==null?void 0:I.scrollTop)}),u()},le=()=>{u()},ee=()=>{u()};function R(I){Te[I?"unshift":"push"](()=>{_=I,l(6,_)})}const ne=()=>{x(he,n=[],n),u()},L=()=>{x(he,n=[],n)};return s.$$set=I=>{"updatePosition"in I&&l(0,a=I.updatePosition),"handlePosition"in I&&l(1,u=I.handlePosition),"data"in I&&l(14,c=I.data),"visibleItemsID"in I&&l(15,f=I.visibleItemsID),"essaysItems"in I&&l(2,g=I.essaysItems),"config"in I&&l(3,d=I.config),"items"in I&&l(16,v=I.items),"screenSize"in I&&l(17,b=I.screenSize)},s.$$.update=()=>{var I;s.$$.dirty[0]&65544&&l(18,t=v.filter(z=>z==null?void 0:z.data).map(z=>{var se,ce,_e,$,me,te;return{img:((_e=(ce=z.data[(se=d.paths.img)==null?void 0:se[0]])==null?void 0:ce[0])==null?void 0:_e["@id"])||xe(z.data,d.paths.img.join(".")),source:`item_${z.id}`,target:($=z.data)==null?void 0:$["@id"],title:((me=z.data)==null?void 0:me[d.paths.title])||((te=z.data)==null?void 0:te["@id"])||""}})),s.$$.dirty[0]&262176&&(n&&n.length==0||he&&((I=n==null?void 0:n[0])==null?void 0:I.data.length)==0)&&x(he,n[0]={data:t,new:t,page:0,paginate:t},n),s.$$.dirty[0]&16&&F(D)},[a,u,g,d,D,n,_,m,o,y,S,E,P,k,c,f,v,b,t,U,H,T,Y,oe,M,ie,le,ee,R,ne,L]}class Yl extends Le{constructor(e){super(),Se(this,e,Hl,Wl,Ae,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function Dt(s,e,l){const t=s.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function Tt(s,e,l){const t=s.slice();return t[6]=e[l],t}function Lt(s){let e,l,t=Object.entries(s[0]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Mt(Dt(s,t,n));return{c(){e=Pe("svg"),l=Pe("g");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=De(n,"svg",{class:!0});var r=C(e);l=De(r,"g",{});var o=C(l);for(let a=0;a<i.length;a+=1)i[a].l(o);o.forEach(h),r.forEach(h),this.h()},h(){p(e,"class","svelte-1ijue24")},m(n,r){w(n,e,r),V(e,l);for(let o=0;o<i.length;o+=1)i[o].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let o;for(o=0;o<t.length;o+=1){const a=Dt(n,t,o);i[o]?i[o].p(a,r):(i[o]=Mt(a),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(n){n&&h(e),Oe(i,n)}}}function St(s){let e,l,t=s[6].label+"",i,n,r,o,a,u,c,f,g=s[6].label+"",d,v,b,D,y,S,_=s[6].reverse&&s[6].label&&At(),E=!s[6].reverse&&s[6].label&&Nt(),P=s[6].reverse&&s[6].label&&Ot(),m=!s[6].reverse&&s[6].label&&Vt();return{c(){e=Pe("text"),l=Pe("textPath"),i=J(t),_&&_.c(),n=G(),E&&E.c(),c=Pe("text"),f=Pe("textPath"),d=J(g),P&&P.c(),v=G(),m&&m.c(),this.h()},l(k){e=De(k,"text",{class:!0,source:!0,target:!0});var A=C(e);l=De(A,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var F=C(l);i=Z(F,t),_&&_.l(F),n=G(),E&&E.l(F),F.forEach(h),A.forEach(h),c=De(k,"text",{class:!0,source:!0,target:!0});var U=C(c);f=De(U,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var H=C(f);d=Z(H,g),P&&P.l(H),v=G(),m&&m.l(H),H.forEach(h),U.forEach(h),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+s[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",o="background "+s[6].class+" svelte-1ijue24"),p(e,"source",a=s[6].datum.source),p(e,"target",u=s[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",b="#path_"+s[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(c,"class",D=Ue(s[6].class)+" svelte-1ijue24"),p(c,"source",y=s[6].datum.source),p(c,"target",S=s[6].datum.target)},m(k,A){w(k,e,A),V(e,l),V(l,i),_&&_.m(l,null),V(l,n),E&&E.m(l,null),w(k,c,A),V(c,f),V(f,d),P&&P.m(f,null),V(f,v),m&&m.m(f,null)},p(k,A){A&1&&t!==(t=k[6].label+"")&&pe(i,t),k[6].reverse&&k[6].label?_||(_=At(),_.c(),_.m(l,n)):_&&(_.d(1),_=null),!k[6].reverse&&k[6].label?E||(E=Nt(),E.c(),E.m(l,null)):E&&(E.d(1),E=null),A&1&&r!==(r="#path_"+k[2])&&p(l,"href",r),A&1&&o!==(o="background "+k[6].class+" svelte-1ijue24")&&p(e,"class",o),A&1&&a!==(a=k[6].datum.source)&&p(e,"source",a),A&1&&u!==(u=k[6].datum.target)&&p(e,"target",u),A&1&&g!==(g=k[6].label+"")&&pe(d,g),k[6].reverse&&k[6].label?P||(P=Ot(),P.c(),P.m(f,v)):P&&(P.d(1),P=null),!k[6].reverse&&k[6].label?m||(m=Vt(),m.c(),m.m(f,null)):m&&(m.d(1),m=null),A&1&&b!==(b="#path_"+k[2])&&p(f,"href",b),A&1&&D!==(D=Ue(k[6].class)+" svelte-1ijue24")&&p(c,"class",D),A&1&&y!==(y=k[6].datum.source)&&p(c,"source",y),A&1&&S!==(S=k[6].datum.target)&&p(c,"target",S)},d(k){k&&h(e),_&&_.d(),E&&E.d(),k&&h(c),P&&P.d(),m&&m.d()}}}function At(s){let e;return{c(){e=J(" -")},l(l){e=Z(l," -")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Nt(s){let e;return{c(){e=J("→")},l(l){e=Z(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Ot(s){let e;return{c(){e=J("←")},l(l){e=Z(l,"←")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Vt(s){let e;return{c(){e=J("→")},l(l){e=Z(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Ct(s){let e,l,t,i,n,r,o=(s[1]==s[6].datum.source&&s[6].selected!="not-selected"||s[1]==s[6].datum.target)&&St(s);return{c(){e=Pe("path"),o&&o.c(),r=G(),this.h()},l(a){e=De(a,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),C(e).forEach(h),o&&o.l(a),r=G(),this.h()},h(){p(e,"id",l="path_"+s[2]),p(e,"class",t=Ue(s[6].class)+" svelte-1ijue24"),p(e,"data-attr",i=s[6].selected),p(e,"d",n=s[6].d)},m(a,u){w(a,e,u),o&&o.m(a,u),w(a,r,u)},p(a,u){u&1&&l!==(l="path_"+a[2])&&p(e,"id",l),u&1&&t!==(t=Ue(a[6].class)+" svelte-1ijue24")&&p(e,"class",t),u&1&&i!==(i=a[6].selected)&&p(e,"data-attr",i),u&1&&n!==(n=a[6].d)&&p(e,"d",n),a[1]==a[6].datum.source&&a[6].selected!="not-selected"||a[1]==a[6].datum.target?o?o.p(a,u):(o=St(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(a){a&&h(e),o&&o.d(a),a&&h(r)}}}function Mt(s){let e,l=s[3],t=[];for(let i=0;i<l.length;i+=1)t[i]=Ct(Tt(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=G()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=G()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&3){l=i[3];let r;for(r=0;r<l.length;r+=1){const o=Tt(i,l,r);t[r]?t[r].p(o,n):(t[r]=Ct(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Oe(t,i),i&&h(e)}}}function Jl(s){let e=Object.keys(s[0]).length>0,l,t=e&&Lt(s);return{c(){t&&t.c(),l=G()},l(i){t&&t.l(i),l=G()},m(i,n){t&&t.m(i,n),w(i,l,n)},p(i,[n]){n&1&&(e=Object.keys(i[0]).length>0),e?t?t.p(i,n):(t=Lt(i),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:Q,o:Q,d(i){t&&t.d(i),i&&h(l)}}}function Zl(s,e,l){let t,i;return K(s,Fe,n=>l(0,t=n)),K(s,We,n=>l(1,i=n)),[t,i]}class Kl extends Le{constructor(e){super(),Se(this,e,Zl,Jl,Ae,{})}}function Ql(s){let e,l,t,i,n,r,o,a,u,c,f;return t=new pl({props:{data:s[11],items:s[3],scrollTopVal:s[7]}}),r=new Yl({props:{items:s[3],data:s[8],screenSize:s[0],essaysItems:s[5],visibleItemsID:s[4],handlePosition:s[13],updatePosition:s[12],config:sl}}),a=new Kl({}),{c(){e=N("article"),l=N("section"),ke(t.$$.fragment),i=W(),n=N("section"),ke(r.$$.fragment),o=W(),ke(a.$$.fragment),this.h()},l(g){e=O(g,"ARTICLE",{style:!0,class:!0});var d=C(e);l=O(d,"SECTION",{class:!0});var v=C(l);Ie(t.$$.fragment,v),v.forEach(h),i=B(d),n=O(d,"SECTION",{class:!0});var b=C(n);Ie(r.$$.fragment,b),b.forEach(h),o=B(d),Ie(a.$$.fragment,d),d.forEach(h),this.h()},h(){var g;p(l,"class","markdown__container svelte-1umlmj5"),p(n,"class","graph__container svelte-1umlmj5"),xt(e,"--theme-color",((g=s[11].meta)==null?void 0:g.color)||"blue"),p(e,"class","svelte-1umlmj5")},m(g,d){w(g,e,d),V(e,l),ye(t,l,null),s[18](l),V(e,i),V(e,n),ye(r,n,null),V(e,o),ye(a,e,null),s[25](e),u=!0,c||(f=[X(l,"wheel",s[19],{passive:!0}),X(l,"scroll",s[20]),X(n,"wheel",s[21],{passive:!0}),X(e,"resize",s[13]),X(e,"scroll",s[22]),X(e,"touchmove",s[23],{passive:!0}),X(e,"click",s[24]),X(e,"keypress",s[16])],c=!0)},p(g,d){const v={};d&8&&(v.items=g[3]),d&128&&(v.scrollTopVal=g[7]),t.$set(v);const b={};d&8&&(b.items=g[3]),d&256&&(b.data=g[8]),d&1&&(b.screenSize=g[0]),d&32&&(b.essaysItems=g[5]),d&16&&(b.visibleItemsID=g[4]),r.$set(b)},i(g){u||(q(t.$$.fragment,g),q(r.$$.fragment,g),q(a.$$.fragment,g),u=!0)},o(g){j(t.$$.fragment,g),j(r.$$.fragment,g),j(a.$$.fragment,g),u=!1},d(g){g&&h(e),Ee(t),s[18](null),Ee(r),Ee(a),s[25](null),c=!1,we(f)}}}function $l(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=J("Loading..."),this.h()},l(n){e=O(n,"ARTICLE",{class:!0});var r=C(e);l=O(r,"SECTION",{class:!0});var o=C(l);t=O(o,"H4",{});var a=C(t);i=Z(a,"Loading..."),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),V(e,l),V(l,t),V(t,i)},p:Q,i:Q,o:Q,d(n){n&&h(e)}}}function xl(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=J("404 Page not found"),this.h()},l(n){e=O(n,"ARTICLE",{class:!0});var r=C(e);l=O(r,"SECTION",{class:!0});var o=C(l);t=O(o,"H4",{});var a=C(t);i=Z(a,"404 Page not found"),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),V(e,l),V(l,t),V(t,i)},p:Q,i:Q,o:Q,d(n){n&&h(e)}}}function es(s){var E,P;let e,l,t,i,n,r,o,a,u,c,f,g,d,v,b,D,y,S,_;return document.title=e=((P=(E=s[11])==null?void 0:E.meta)==null?void 0:P.title)||ue.title,{c(){l=W(),t=N("meta"),i=W(),n=N("meta"),r=W(),o=N("meta"),a=W(),u=N("meta"),c=W(),f=N("meta"),g=W(),d=N("meta"),v=W(),b=N("meta"),D=W(),y=N("meta"),S=W(),_=N("meta"),this.h()},l(m){l=B(m),t=O(m,"META",{name:!0,content:!0}),i=B(m),n=O(m,"META",{property:!0,content:!0}),r=B(m),o=O(m,"META",{property:!0,content:!0}),a=B(m),u=O(m,"META",{property:!0,content:!0}),c=B(m),f=O(m,"META",{name:!0,content:!0}),g=B(m),d=O(m,"META",{property:!0,content:!0}),v=B(m),b=O(m,"META",{name:!0,content:!0}),D=B(m),y=O(m,"META",{name:!0,content:!0}),S=B(m),_=O(m,"META",{name:!0,content:!0}),this.h()},h(){var m,k,A,F,U,H,T,Y,oe,M,ie,le,ee,R,ne,L;p(t,"name","description"),p(t,"content",((k=(m=s[11])==null?void 0:m.meta)==null?void 0:k.description)||Je),p(n,"property","og:url"),p(n,"content",de+((A=s[11])==null?void 0:A.path)||de+((F=s[11])==null?void 0:F.path)),p(o,"property","og:description"),p(o,"content",((H=(U=s[11])==null?void 0:U.meta)==null?void 0:H.description)||Je),p(u,"property","og:image"),p(u,"content",((Y=(T=s[11])==null?void 0:T.meta)==null?void 0:Y.cover)||et),p(f,"name","twitter:card"),p(f,"content","summary_large_image"),p(d,"property","twitter:url"),p(d,"content",de+((oe=s[11])==null?void 0:oe.path)||de+((M=s[11])==null?void 0:M.path)),p(b,"name","twitter:title"),p(b,"content",((le=(ie=s[11])==null?void 0:ie.meta)==null?void 0:le.title)||ue.title),p(y,"name","twitter:description"),p(y,"content",((R=(ee=s[11])==null?void 0:ee.meta)==null?void 0:R.description)||Je),p(_,"name","twitter:image"),p(_,"content",((L=(ne=s[11])==null?void 0:ne.meta)==null?void 0:L.cover)||et)},m(m,k){w(m,l,k),w(m,t,k),w(m,i,k),w(m,n,k),w(m,r,k),w(m,o,k),w(m,a,k),w(m,u,k),w(m,c,k),w(m,f,k),w(m,g,k),w(m,d,k),w(m,v,k),w(m,b,k),w(m,D,k),w(m,y,k),w(m,S,k),w(m,_,k)},p(m,k){var A,F;k&2048&&e!==(e=((F=(A=m[11])==null?void 0:A.meta)==null?void 0:F.title)||ue.title)&&(document.title=e)},d(m){m&&h(l),m&&h(t),m&&h(i),m&&h(n),m&&h(r),m&&h(o),m&&h(a),m&&h(u),m&&h(c),m&&h(f),m&&h(g),m&&h(d),m&&h(v),m&&h(b),m&&h(D),m&&h(y),m&&h(S),m&&h(_)}}}function ts(s){let e,l,t,i,n,r,o,a;Qt(s[17]);const u=[xl,$l,Ql],c=[];function f(d,v){return d[11]==null&&d[2]==null?0:d[2]==null?1:2}l=f(s),t=c[l]=u[l](s);let g=s[11]!=null&&es(s);return{c(){e=N("div"),t.c(),i=W(),g&&g.c(),n=G()},l(d){e=O(d,"DIV",{});var v=C(e);t.l(v),v.forEach(h),i=B(d);const b=$t("svelte-a4gtco",document.head);g&&g.l(b),n=G(),b.forEach(h)},m(d,v){w(d,e,v),c[l].m(e,null),w(d,i,v),g&&g.m(document.head,null),V(document.head,n),r=!0,o||(a=[X(window,"resize",s[13]),X(window,"click",s[13]),X(window,"resize",s[17])],o=!0)},p(d,[v]){let b=l;l=f(d),l===b?c[l].p(d,v):(ae(),j(c[b],1,1,()=>{c[b]=null}),fe(),t=c[l],t?t.p(d,v):(t=c[l]=u[l](d),t.c()),q(t,1),t.m(e,null)),d[11]!=null&&g.p(d,v)},i(d){r||(q(t),r=!0)},o(d){j(t),r=!1},d(d){d&&h(e),c[l].d(),d&&h(i),g&&g.d(d),h(n),o=!1,we(a)}}}function ls(s,e,l){let t,i,n,r,o,a;K(s,il,M=>l(26,t=M)),K(s,Ze,M=>l(8,i=M)),K(s,We,M=>l(15,n=M)),K(s,Ge,M=>l(9,o=M)),K(s,Ne,M=>l(10,a=M));let{data:u}=e,c,f,g=[...u.posts].find(M=>M.path.includes(t.params.slug)),d,v,b=[],D=[],y,S;const _=be(!1);K(s,_,M=>l(27,r=M));const E=()=>{x(_,r=!0,r)};Be(async()=>{var le;await bl(),x(Ze,i=[],i);const M=Xe.subscribe(async ee=>{ee.length>0&&(l(3,v=await Il(g.text,ee)),l(4,b=v.filter(R=>!R.set).map(R=>{var ne;return`${(ne=R.data)==null?void 0:ne["@id"]}`})),l(2,d=await jt(v)),x(Ze,i=d,i))}),ie=localStorage.getItem("selectedLanguage")||((le=ll)==null?void 0:le[0]);return l(5,D=u.posts.reduce((ee,R)=>(!R.path.includes(t.params.slug)&&R.meta.lang==ie&&R.links.map(ne=>{const L=ee.find(z=>z.id===ne),I={title:R.meta.title,url:R.path};L?L.essays.some(z=>z.title===I.title&&z.url===I.url)||L.essays.push(I):ee.push({id:ne,essays:[I]})}),ee),[])),()=>M()});function P(M){ze.call(this,s,M)}function m(){l(0,c=window.innerWidth)}function k(M){Te[M?"unshift":"push"](()=>{f=M,l(1,f)})}const A=()=>{E(),x(Ne,a=!1,a),l(7,S=f==null?void 0:f.scrollTop)},F=()=>{c<1e3&&(E(),l(7,S=f==null?void 0:f.scrollTop),x(Ne,a=!1,a))},U=()=>{c>1e3&&x(Ne,a=!0,a)},H=()=>{x(Ge,o=y==null?void 0:y.scrollLeft,o)},T=()=>{x(Ge,o=y==null?void 0:y.scrollLeft,o),E()},Y=()=>{E()};function oe(M){Te[M?"unshift":"push"](()=>{y=M,l(6,y)})}return s.$$set=M=>{"data"in M&&l(14,u=M.data)},s.$$.update=()=>{s.$$.dirty&32768&&E()},[c,f,d,v,b,D,y,S,i,o,a,g,_,E,u,n,P,m,k,A,F,U,H,T,Y,oe]}class fs extends Le{constructor(e){super(),Se(this,e,ls,ts,Ae,{data:14})}}export{fs as component,as as universal};
